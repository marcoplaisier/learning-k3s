# ---------------------------------------------------------------------------
# Camel K IntegrationPlatform Configuration
# This defines how Camel K builds and runs integrations in the cluster
# ---------------------------------------------------------------------------
apiVersion: camel.apache.org/v1
kind: IntegrationPlatform
metadata:
  name: camel-k
  namespace: camel-k
  labels:
    app: camel-k
  annotations:
    argocd.argoproj.io/sync-wave: "4"
spec:
  build:
    # Build strategy for K3s - using pod (builds in-cluster)
    # Publish strategy Spectrum for pod builds (lightweight, no external registry)
    buildConfiguration:
      strategy: pod
    publishStrategy: Spectrum
    registry:
      # Using local k3s containerd - no external registry needed
      address: localhost:5000
      insecure: true
    timeout: 5m
  cluster: Kubernetes
  profile: Kubernetes
